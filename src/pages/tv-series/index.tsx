import Head from "next/head";
import React from "react";
import TVDashboard from "../../components/TVDashboard";
import { Movie } from "../../../interface";
import {
  getAiringTodayTvShows,
  getOnTheAirTvShows,
  getTrendingTvShows,
} from "../api/movie";

interface ITv {
  trendingTvShows: Movie[];
  airingToday: Movie[];
  onTheAir: Movie[];
}

const TVPage = ({ trendingTvShows, airingToday, onTheAir }: ITv) => {
  console.log(trendingTvShows);
  return (
    <main className="">
      <Head>
        <title>TV Shows</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <TVDashboard
        trendingTvShows={trendingTvShows}
        airingToday={airingToday}
        onTheAir={onTheAir}
      />
    </main>
  );
};

export const getStaticProps = async () => {
  const [trendingTvShows, airingToday, onTheAir] = [
    await getTrendingTvShows(),
    await getAiringTodayTvShows(),
    await getOnTheAirTvShows(),
  ];

  return {
    props: {
      trendingTvShows: trendingTvShows || null,
      airingToday: airingToday || null,
      onTheAir: onTheAir || null,
    },
  };
};

export default TVPage;
